{% extends 'base.html.twig' %}
{# H√©rite du template principal base.html.twig pour garder la structure commune (header, footer, styles‚Ä¶) #}

{% block title %}
    R√©sultats de recherche - Bolonews
{% endblock %}
{# D√©finit le titre de la page affich√© dans l‚Äôonglet du navigateur #}

{% block body %}
    <h1>R√©sultats de recherche</h1>
    {# Titre principal visible en haut de la page #}

    <form action="{{ path('app_search') }}" method="get" class="search-bar" style="margin-bottom:20px;">
        {# Formulaire GET pour saisir un mot cl√©, qui sera transmis √† la route "app_search" #}
        <input type="text" name="q" value="{{ search }}" placeholder="Rechercher un article...">
        {# Champ texte pr√©-rempli avec la variable "search" contenant la recherche en cours #}
        <button type="submit">üîç Rechercher</button>
        {# Bouton pour soumettre la recherche #}
    </form>

    {% if search %}
        <p>Recherche pour : <strong>{{ search }}</strong></p>
        {# Si la variable "search" n'est pas vide, affiche la recherche en cours #}
    {% endif %}

    {% if articles is empty %}
        <p>Aucun article ne correspond √† votre recherche.</p>
        {# Si aucun article ne correspond, affiche un message d‚Äôabsence de r√©sultats #}
    {% else %}
        <div class="articles">
        {# Conteneur global pour la liste des articles #}

            {% for article in articles %}
            {# Boucle sur chaque article du tableau "articles" fourni par le contr√¥leur #}

                <div class="article-card">
                {# Bloc individuel pour chaque article, pouvant √™tre stylis√© par CSS #}

                    {% if article.image %}
                        <img src="{{ asset('uploads/images/' ~ article.image) }}" alt="{{ article.titre }}" class="article-img" style="max-width: 100%; height: auto; margin-bottom: 10px;">
                        {# Affiche l‚Äôimage de l‚Äôarticle si elle existe, avec un chemin relatif dans uploads/images/ #}
                        {# La balise img est responsive et a un petit margin dessous #}
                    {% endif %}
                    
                    <h2>
                        <a href="{{ path('article_show', { id: article.id }) }}">{{ article.titre }}</a>
                        {# Titre de l‚Äôarticle cliquable vers sa page d√©taill√©e #}
                    </h2>
                    
                    <p>{{ article.chapeau|length > 200 ? article.chapeau|slice(0, 200) ~ '‚Ä¶' : article.chapeau }}</p>
                    {# Affiche un extrait (chapeau) limit√© √† 200 caract√®res, avec "‚Ä¶" si trop long #}

                    <p><strong>Auteur :</strong> {{ article.auteur ? article.auteur.pseudo : 'Inconnu' }}</p>
                    {# Affiche le pseudo de l‚Äôauteur ou 'Inconnu' si non d√©fini #}

                    <p><strong>Date :</strong> {{ article.dateCreation ? article.dateCreation|date('d/m/Y') : '' }}</p>
                    {# Date de cr√©ation format√©e en jour/mois/ann√©e, ou vide si absente #}

                    <a href="{{ path('article_show', { id: article.id }) }}">‚û°Ô∏è Lire l‚Äôarticle</a>
                    {# Lien texte en bas vers la page compl√®te de l‚Äôarticle #}

                </div> {# Fin d‚Äôune carte article #}
            {% endfor %}
        </div> {# Fin du conteneur liste articles #}
    {% endif %}
{% endblock %}
{# Fin du bloc body #}
